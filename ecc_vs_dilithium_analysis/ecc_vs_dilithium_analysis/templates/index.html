{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECC vs CRYSTALS-Dilithium - Cryptographic Algorithms Comparison</title>
    <link rel="stylesheet" href="{% static 'ecc_vs_dilithium_analysis/css/style.css' %}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Cryptographic Algorithms Comparison</h1>
            <p class="subtitle">ECC (Elliptic Curve Cryptography) vs CRYSTALS-Dilithium</p>
        </header>

        <div class="main-grid">
            <!-- Left Panel: Algorithm Selection & Configuration -->
            <div class="panel config-panel">
                <h2>Test Configuration</h2>
                
                <div class="form-group">
                    <label class="form-label">Choose Algorithm</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="ecc" checked>
                            <span class="radio-custom"></span>
                            <span class="radio-text">
                                <strong>ECC (NIST P-256)</strong>
                                <small>Elliptic Curve Cryptography</small>
                            </span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="dilithium">
                            <span class="radio-custom"></span>
                            <span class="radio-text">
                                <strong>CRYSTALS-Dilithium</strong>
                                <small>Post-quantum digital signature (NIST)</small>
                            </span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="operation">Operation</label>
                    <select id="operation" class="form-control">
                        <option value="keygen">Key Generation</option>
                        <option value="sign">Message Signing</option>
                        <option value="verify">Signature Verification</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="messageSize">
                        Message Size: <span id="messageSizeValue">256</span> bytes
                    </label>
                    <input type="range" id="messageSize" class="range-control" min="256" max="4096" value="256" step="256">
                    <div class="range-labels">
                        <span>256</span>
                        <span>4096</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="iterations">Iterations</label>
                    <input type="number" id="iterations" class="form-control" value="1" min="1" max="100" step="1">
                </div>

                <button id="runTestBtn" class="btn btn--primary btn--full-width">
                    <span id="btnText">Run Test</span>
                    <span id="btnLoader" class="loader hidden"></span>
                </button>

                <!-- Algorithm Info Card -->
                <div class="info-box" id="algorithmInfoCard">
                    <h3>Algorithm Information</h3>
                    <div id="algorithmInfo" class="info-content">
                        <p><strong>Private Key:</strong> <span id="infoPrivateKey">32 bytes</span></p>
                        <p><strong>Public Key:</strong> <span id="infoPublicKey">64 bytes</span></p>
                        <p><strong>Signature Size:</strong> <span id="infoSignature">64 bytes</span></p>
                        <p><strong>Security:</strong> <span id="infoSecurity">128-bit (classical)</span></p>
                        <p class="info-description" id="infoDescription">Traditional elliptic-curve cryptography</p>
                    </div>
                </div>

                <!-- Key Size Comparison -->
                <div class="comparison-card">
                    <h3>Key Size Comparison</h3>
                    <div class="comparison-bars">
                        <div class="comparison-item">
                            <span class="comparison-label">Private Key</span>
                            <div class="comparison-bar-container">
                                <div class="comparison-bar comparison-bar--ecc" style="width: 1.3%;"></div>
                                <span class="comparison-value">32 B (ECC)</span>
                            </div>
                            <div class="comparison-bar-container">
                                <div class="comparison-bar comparison-bar--dilithium" style="width: 100%;"></div>
                                <span class="comparison-value">2528 B (Dilithium)</span>
                            </div>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Public Key</span>
                            <div class="comparison-bar-container">
                                <div class="comparison-bar comparison-bar--ecc" style="width: 4.9%;"></div>
                                <span class="comparison-value">64 B (ECC)</span>
                            </div>
                            <div class="comparison-bar-container">
                                <div class="comparison-bar comparison-bar--dilithium" style="width: 100%;"></div>
                                <span class="comparison-value">1312 B (Dilithium)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="panel results-panel">
                <div class="results-header">
                    <h2>Results</h2>
                    <div class="header-actions">
                        <button id="clearResultsBtn" class="btn btn--secondary btn--sm">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Clear
                        </button>
                        <button id="exportCsvBtn" class="btn btn--secondary btn--sm">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Export CSV
                        </button>
                    </div>
                </div>

                <!-- Current Result Card -->
                <div id="currentResult" class="current-result hidden">
                    <h3>Last Result</h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <span class="result-label">Algorithm:</span>
                            <span id="resAlgorithm" class="result-value"></span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Operation:</span>
                            <span id="resOperation" class="result-value"></span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Size:</span>
                            <span id="resMessageSize" class="result-value"></span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Execution Time:</span>
                            <span id="resExecutionTime" class="result-value highlight"></span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Memory Usage:</span>
                            <span id="resMemoryUsage" class="result-value highlight"></span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Status:</span>
                            <span id="resStatus" class="result-value"></span>
                        </div>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card stat-card--ecc">
                        <h4>Average Time (ECC)</h4>
                        <div id="avgTimeEcc" class="stat-value">-</div>
                    </div>
                    <div class="stat-card stat-card--dilithium">
                        <h4>Average Time (Dilithium)</h4>
                        <div id="avgTimeDilithium" class="stat-value">-</div>
                    </div>
                    <div class="stat-card stat-card--ecc">
                        <h4>Average Memory (ECC)</h4>
                        <div id="avgMemoryEcc" class="stat-value">-</div>
                    </div>
                    <div class="stat-card stat-card--dilithium">
                        <h4>Average Memory (Dilithium)</h4>
                        <div id="avgMemoryDilithium" class="stat-value">-</div>
                    </div>
                </div>

                <!-- Results Table -->
                <div class="table-container">
                    <h3>Test History</h3>
                    <div class="table-wrapper">
                        <table id="resultsTable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Algorithm</th>
                                    <th>Operation</th>
                                    <th>Size</th>
                                    <th>Time (ms)</th>
                                    <th>Memory (KB)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody">
                                <!-- Results will be dynamically inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Comparison Chart -->
        <div class="panel chart-panel">
            <h2>Performance Comparison Chart</h2>
            <div class="chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'ecc_vs_dilithium_analysis/js/app.js' %}"></script>
</body>
</html>